syntax = "proto3";

option java_multiple_files = true;
option java_package = "com.cashpilot.userservice.grpc";
option java_outer_classname = "UserProfileProto";

import "google/protobuf/empty.proto";
import "google/api/annotations.proto";
import "validate/validate.proto";

service UserProfileService {

  rpc GetUserProfile(google.protobuf.Empty) returns (UserProfileResponse) {
    option (google.api.http) = {
      get: "/users/me"
    };
  }

  rpc CreateUserProfile(CreateUserProfileRequest) returns (UserProfileResponse) {
    option (google.api.http) = {
      post: "/users"
      body: "*"
    };
  }

  rpc UpdateUserProfile(UpdateUserProfileRequest) returns (UserProfileResponse) {
    option (google.api.http) = {
      patch: "/users/me"
      body: "*"
    };
  }

  rpc DeleteUserProfile(google.protobuf.Empty) returns (google.protobuf.Empty) {
    option (google.api.http) = {
      delete: "/users/me"
    };
  }
}

message CreateUserProfileRequest {
  string default_currency = 1 [
    (validate.rules).string = {in: ["USD", "EUR", "KZT", "GBP", "RUB"]}
  ];
  bool balance_visibility = 2;
  string timezone = 3 [(validate.rules).string.min_len = 1];
  string language = 4 [(validate.rules).string = {min_len: 2, max_len: 5}];
  string theme = 5 [
    (validate.rules).string = {in: ["LIGHT", "DARK", "SYSTEM"]}
  ];
  bool send_notification_to_gmail = 6;
  bool onboarding_completed = 7;
}

message UpdateUserProfileRequest {
  string default_currency = 1 [
    (validate.rules).string = {in: ["USD", "EUR", "KZT", "GBP", "RUB"]}
  ];
  bool balance_visibility = 2;
  string timezone = 3 [(validate.rules).string.min_len = 1];
  string language = 4 [(validate.rules).string = {min_len: 2, max_len: 5}];
  string theme = 5 [
    (validate.rules).string = {in: ["LIGHT", "DARK", "SYSTEM"]}
  ];
  bool send_notification_to_gmail = 6;
  bool onboarding_completed = 7;
}


message UserProfileResponse {
  string user_id = 1;
  string default_currency = 2;
  bool balance_visibility = 3;
  string timezone = 4;
  string language = 5;
  string theme = 6;
  bool send_notification_to_gmail = 7;
  bool onboarding_completed = 8;
  string created_at = 9;
  string updated_at = 10;
}
